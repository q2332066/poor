
<!-- <script type="text/javascript" src="https://public.tableau.com/javascripts/api/tableau-2.min.js"></script> -->
<!-- <script type="text/javascript" src="http://192.168.101.59:8000/javascripts/api/viz_v1.js"></script> -->
<div id="vizContainer" style="width: 100%;height: 100%;"></div>
<script type="text/javascript">
    layui.use(['layer', 'form', 'table', 'util', 'admin', 'tree', 'dropdown', 'xmSelect', 'treeTable'], function () {
      var $ = layui.jquery;
      var setter = layui.setter;
      var admin = layui.admin;

      admin.req('bi/embed/tableau', {}, function(resp){
        initViz(resp.data)
      }, 'get')

      function initViz(url) {
        var containerDiv = document.getElementById("vizContainer");
        options = {
            hideTabs: true,
            //隐藏底部所有按钮
            //hideToolbar:true,
            height: '100%',
            width: '100%',
            onFirstInteractive: function () {
                console.log("Run this code when the viz has finished loading.");
            }
        };
        console.log(url)
        var viz = new tableau.Viz(containerDiv, url, options);
      }
    });
</script>
